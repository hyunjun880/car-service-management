<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìë™ì°¨ì •ë¹„ì†Œ ê³ ê°ê´€ë¦¬</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .auth-section {
            padding: 30px;
            text-align: center;
            background: #f8f9fa;
        }

        .btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .main-content {
            padding: 30px;
            display: none;
        }

        .form-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        .form-group input, .form-group textarea, .form-group select {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .customers-section h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .search-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .search-bar input {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
        }

        .customers-table {
            overflow-x: auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .status {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status.completed {
            background: #d4edda;
            color: #155724;
        }

        .status.pending {
            background: #fff3cd;
            color: #856404;
        }

        .status.in-progress {
            background: #cce5ff;
            color: #004085;
        }

        .action-buttons {
            display: flex;
            gap: 5px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 5px;
        }

        .btn-edit {
            background: #007bff;
        }

        .btn-delete {
            background: #dc3545;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .success {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .search-bar {
                flex-direction: column;
            }
            
            .customers-table {
                font-size: 14px;
            }
            
            th, td {
                padding: 10px 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš— ìë™ì°¨ì •ë¹„ì†Œ ê³ ê°ê´€ë¦¬</h1>
            <p>êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™ ê³ ê°ê´€ë¦¬ ì‹œìŠ¤í…œ</p>
        </div>

        <!-- ì¸ì¦ ì„¹ì…˜ -->
        <div class="auth-section" id="authSection">
            <h2>êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™</h2>
            <p>êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì—¬ ì‹œíŠ¸ì— ì ‘ê·¼í•˜ì„¸ìš”.</p>
            <button class="btn" id="authorizeBtn">êµ¬ê¸€ ë¡œê·¸ì¸</button>
            <button class="btn" id="signoutBtn" style="display: none;">ë¡œê·¸ì•„ì›ƒ</button>
            <div id="authStatus"></div>
        </div>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div class="main-content" id="mainContent">
            <!-- ê³ ê° ë“±ë¡ í¼ -->
            <div class="form-section">
                <h2>ê³ ê° ì •ë³´ ë“±ë¡</h2>
                <form id="customerForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="customerName">ê³ ê°ëª… *</label>
                            <input type="text" id="customerName" required>
                        </div>
                        <div class="form-group">
                            <label for="phoneNumber">ì—°ë½ì²˜ *</label>
                            <input type="tel" id="phoneNumber" required>
                        </div>
                        <div class="form-group">
                            <label for="carBrand">ì°¨ëŸ‰ ë¸Œëœë“œ</label>
                            <input type="text" id="carBrand">
                        </div>
                        <div class="form-group">
                            <label for="carModel">ì°¨ëŸ‰ ëª¨ë¸</label>
                            <input type="text" id="carModel">
                        </div>
                        <div class="form-group">
                            <label for="carYear">ì—°ì‹</label>
                            <input type="number" id="carYear" min="1990" max="2030">
                        </div>
                        <div class="form-group">
                            <label for="serviceType">ì„œë¹„ìŠ¤ ìœ í˜•</label>
                            <select id="serviceType">
                                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="ì •ê¸°ì ê²€">ì •ê¸°ì ê²€</option>
                                <option value="ì—”ì§„ì˜¤ì¼êµí™˜">ì—”ì§„ì˜¤ì¼êµí™˜</option>
                                <option value="íƒ€ì´ì–´êµì²´">íƒ€ì´ì–´êµì²´</option>
                                <option value="ë¸Œë ˆì´í¬ì ê²€">ë¸Œë ˆì´í¬ì ê²€</option>
                                <option value="ì—ì–´ì»¨ì ê²€">ì—ì–´ì»¨ì ê²€</option>
                                <option value="ê¸°íƒ€">ê¸°íƒ€</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="serviceDate">ì„œë¹„ìŠ¤ ë‚ ì§œ</label>
                            <input type="date" id="serviceDate">
                        </div>
                        <div class="form-group">
                            <label for="serviceStatus">ìƒíƒœ</label>
                            <select id="serviceStatus">
                                <option value="pending">ëŒ€ê¸°ì¤‘</option>
                                <option value="in-progress">ì§„í–‰ì¤‘</option>
                                <option value="completed">ì™„ë£Œ</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="notes">íŠ¹ì´ì‚¬í•­</label>
                        <textarea id="notes" rows="3"></textarea>
                    </div>
                    <button type="submit" class="btn" id="submitBtn">ê³ ê° ë“±ë¡</button>
                    <button type="button" class="btn" id="cancelBtn" style="display: none;">ì·¨ì†Œ</button>
                </form>
            </div>

            <!-- ê³ ê° ëª©ë¡ -->
            <div class="customers-section">
                <h2>ê³ ê° ëª©ë¡</h2>
                <div class="search-bar">
                    <input type="text" id="searchInput" placeholder="ê³ ê°ëª…, ì—°ë½ì²˜, ì°¨ëŸ‰ ì •ë³´ë¡œ ê²€ìƒ‰...">
                    <button class="btn" id="searchBtn">ê²€ìƒ‰</button>
                    <button class="btn" id="refreshBtn">ìƒˆë¡œê³ ì¹¨</button>
                </div>
                
                <div id="customersTable" class="customers-table">
                    <div class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ìˆ˜ì • ëª¨ë‹¬ -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <h3>ê³ ê° ì •ë³´ ìˆ˜ì •</h3>
            <form id="editForm">
                <!-- ë™ì¼í•œ í¼ í•„ë“œë“¤ -->
            </form>
        </div>
    </div>

    <script>
        // êµ¬ê¸€ API ì„¤ì •
        const API_KEY = 'AIzaSyBfFEWajcRGAP36jZAzxHTMc77fWjkQXBU'; // ì‹¤ì œ API í‚¤ë¡œ êµì²´ í•„ìš”
        const CLIENT_ID = '296829142817-ousdanj8dor9qnhcc5a67tv3mrh02gur.apps.googleusercontent.com'; // ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ IDë¡œ êµì²´ í•„ìš”
        const DISCOVERY_DOC = 'https://sheets.googleapis.com/$discovery/rest?version=v4';
        const SCOPES = 'https://www.googleapis.com/auth/spreadsheets';
        
        // êµ¬ê¸€ ì‹œíŠ¸ ID (ì‹¤ì œ ì‹œíŠ¸ IDë¡œ êµì²´ í•„ìš”)
        const SPREADSHEET_ID = '16q8crGvmzm33DNozIzUhTFaSf4K3gbs-gx-afwCNRqA';
        const SHEET_NAME = 'ê³ ê°ê´€ë¦¬';

        let gapi;
        let tokenClient;
        let isAuthorized = false;
        let customers = [];
        let editingRowIndex = -1;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = function() {
            loadGoogleAPI();
        };

        // êµ¬ê¸€ API ë¡œë“œ
        function loadGoogleAPI() {
            const script = document.createElement('script');
            script.src = 'https://apis.google.com/js/api.js';
            script.onload = initializeGapi;
            document.head.appendChild(script);
        }

        // GAPI ì´ˆê¸°í™”
        async function initializeGapi() {
            await gapi.load('client', initializeGapiClient);
        }

        async function initializeGapiClient() {
            await gapi.client.init({
                apiKey: API_KEY,
                discoveryDocs: [DISCOVERY_DOC],
            });

            // Google Identity Services ì´ˆê¸°í™”
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: CLIENT_ID,
                scope: SCOPES,
                callback: handleAuthCallback,
            });

            setupEventListeners();
        }

        // ì¸ì¦ ì½œë°± ì²˜ë¦¬
        function handleAuthCallback(resp) {
            if (resp.error !== undefined) {
                throw (resp);
            }
            
            isAuthorized = true;
            document.getElementById('authorizeBtn').style.display = 'none';
            document.getElementById('signoutBtn').style.display = 'block';
            document.getElementById('authSection').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            
            showMessage('êµ¬ê¸€ ì‹œíŠ¸ì— ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            loadCustomers();
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        function setupEventListeners() {
            document.getElementById('authorizeBtn').addEventListener('click', () => {
                tokenClient.requestAccessToken({prompt: 'consent'});
            });

            document.getElementById('signoutBtn').addEventListener('click', () => {
                const token = gapi.client.getToken();
                if (token !== null) {
                    google.accounts.oauth2.revoke(token.access_token);
                    gapi.client.setToken('');
                }
                
                isAuthorized = false;
                document.getElementById('authorizeBtn').style.display = 'block';
                document.getElementById('signoutBtn').style.display = 'none';
                document.getElementById('authSection').style.display = 'block';
                document.getElementById('mainContent').style.display = 'none';
            });

            document.getElementById('customerForm').addEventListener('submit', handleFormSubmit);
            document.getElementById('searchBtn').addEventListener('click', searchCustomers);
            document.getElementById('refreshBtn').addEventListener('click', loadCustomers);
            document.getElementById('cancelBtn').addEventListener('click', cancelEdit);
            
            // ê²€ìƒ‰ ì…ë ¥ ì‹œ ì‹¤ì‹œê°„ ê²€ìƒ‰
            document.getElementById('searchInput').addEventListener('input', searchCustomers);
            
            // ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •
            document.getElementById('serviceDate').value = new Date().toISOString().split('T')[0];
        }

        // ê³ ê° ë°ì´í„° ë¡œë“œ
        async function loadCustomers() {
            if (!isAuthorized) return;
            
            try {
                showLoading();
                
                const response = await gapi.client.sheets.spreadsheets.values.get({
                    spreadsheetId: SPREADSHEET_ID,
                    range: `${SHEET_NAME}!A:I`,
                });

                const rows = response.result.values;
                if (rows && rows.length > 1) {
                    // í—¤ë” ì œì™¸í•˜ê³  ë°ì´í„° íŒŒì‹±
                    customers = rows.slice(1).map((row, index) => ({
                        rowIndex: index + 2, // ì‹œíŠ¸ì—ì„œì˜ í–‰ ë²ˆí˜¸ (í—¤ë” í¬í•¨)
                        name: row[0] || '',
                        phone: row[1] || '',
                        carBrand: row[2] || '',
                        carModel: row[3] || '',
                        carYear: row[4] || '',
                        serviceType: row[5] || '',
                        serviceDate: row[6] || '',
                        status: row[7] || 'pending',
                        notes: row[8] || ''
                    }));
                } else {
                    customers = [];
                    await createHeaderRow();
                }
                
                displayCustomers(customers);
            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                showMessage('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // í—¤ë” í–‰ ìƒì„±
        async function createHeaderRow() {
            const headers = [
                'ê³ ê°ëª…', 'ì—°ë½ì²˜', 'ì°¨ëŸ‰ë¸Œëœë“œ', 'ì°¨ëŸ‰ëª¨ë¸', 'ì—°ì‹', 
                'ì„œë¹„ìŠ¤ìœ í˜•', 'ì„œë¹„ìŠ¤ë‚ ì§œ', 'ìƒíƒœ', 'íŠ¹ì´ì‚¬í•­'
            ];
            
            try {
                await gapi.client.sheets.spreadsheets.values.update({
                    spreadsheetId: SPREADSHEET_ID,
                    range: `${SHEET_NAME}!A1:I1`,
                    valueInputOption: 'RAW',
                    resource: {
                        values: [headers]
                    }
                });
            } catch (error) {
                console.error('í—¤ë” ìƒì„± ì‹¤íŒ¨:', error);
            }
        }

        // ê³ ê° ëª©ë¡ í‘œì‹œ
        function displayCustomers(customersToShow) {
            const tableContainer = document.getElementById('customersTable');
            
            if (customersToShow.length === 0) {
                tableContainer.innerHTML = '<div class="loading">ë“±ë¡ëœ ê³ ê°ì´ ì—†ìŠµë‹ˆë‹¤.</div>';
                return;
            }

            let tableHTML = `
                <table>
                    <thead>
                        <tr>
                            <th>ê³ ê°ëª…</th>
                            <th>ì—°ë½ì²˜</th>
                            <th>ì°¨ëŸ‰ì •ë³´</th>
                            <th>ì„œë¹„ìŠ¤ìœ í˜•</th>
                            <th>ì„œë¹„ìŠ¤ë‚ ì§œ</th>
                            <th>ìƒíƒœ</th>
                            <th>íŠ¹ì´ì‚¬í•­</th>
                            <th>ì‘ì—…</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            customersToShow.forEach((customer, index) => {
                const carInfo = [customer.carBrand, customer.carModel, customer.carYear].filter(Boolean).join(' ');
                tableHTML += `
                    <tr>
                        <td>${customer.name}</td>
                        <td>${customer.phone}</td>
                        <td>${carInfo}</td>
                        <td>${customer.serviceType}</td>
                        <td>${customer.serviceDate}</td>
                        <td><span class="status ${customer.status}">${getStatusText(customer.status)}</span></td>
                        <td>${customer.notes}</td>
                        <td class="action-buttons">
                            <button class="btn btn-small btn-edit" onclick="editCustomer(${index})">ìˆ˜ì •</button>
                            <button class="btn btn-small btn-delete" onclick="deleteCustomer(${index})">ì‚­ì œ</button>
                        </td>
                    </tr>
                `;
            });

            tableHTML += '</tbody></table>';
            tableContainer.innerHTML = tableHTML;
        }

        // ìƒíƒœ í…ìŠ¤íŠ¸ ë³€í™˜
        function getStatusText(status) {
            const statusMap = {
                'pending': 'ëŒ€ê¸°ì¤‘',
                'in-progress': 'ì§„í–‰ì¤‘',
                'completed': 'ì™„ë£Œ'
            };
            return statusMap[status] || status;
        }

        // í¼ ì œì¶œ ì²˜ë¦¬
        async function handleFormSubmit(e) {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('customerName').value,
                phone: document.getElementById('phoneNumber').value,
                carBrand: document.getElementById('carBrand').value,
                carModel: document.getElementById('carModel').value,
                carYear: document.getElementById('carYear').value,
                serviceType: document.getElementById('serviceType').value,
                serviceDate: document.getElementById('serviceDate').value,
                status: document.getElementById('serviceStatus').value,
                notes: document.getElementById('notes').value
            };

            try {
                if (editingRowIndex === -1) {
                    await addCustomer(formData);
                    showMessage('ê³ ê°ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                } else {
                    await updateCustomer(editingRowIndex, formData);
                    showMessage('ê³ ê° ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                    cancelEdit();
                }
                
                document.getElementById('customerForm').reset();
                document.getElementById('serviceDate').value = new Date().toISOString().split('T')[0];
                loadCustomers();
            } catch (error) {
                console.error('ì €ì¥ ì‹¤íŒ¨:', error);
                showMessage('ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ê³ ê° ì¶”ê°€
        async function addCustomer(customerData) {
            const values = [
                customerData.name,
                customerData.phone,
                customerData.carBrand,
                customerData.carModel,
                customerData.carYear,
                customerData.serviceType,
                customerData.serviceDate,
                customerData.status,
                customerData.notes
            ];

            await gapi.client.sheets.spreadsheets.values.append({
                spreadsheetId: SPREADSHEET_ID,
                range: `${SHEET_NAME}!A:I`,
                valueInputOption: 'RAW',
                resource: {
                    values: [values]
                }
            });
        }

        // ê³ ê° ì •ë³´ ìˆ˜ì •
        async function updateCustomer(index, customerData) {
            const customer = customers[index];
            const values = [
                customerData.name,
                customerData.phone,
                customerData.carBrand,
                customerData.carModel,
                customerData.carYear,
                customerData.serviceType,
                customerData.serviceDate,
                customerData.status,
                customerData.notes
            ];

            await gapi.client.sheets.spreadsheets.values.update({
                spreadsheetId: SPREADSHEET_ID,
                range: `${SHEET_NAME}!A${customer.rowIndex}:I${customer.rowIndex}`,
                valueInputOption: 'RAW',
                resource: {
                    values: [values]
                }
            });
        }

        // ê³ ê° í¸ì§‘
        function editCustomer(index) {
            const customer = customers[index];
            editingRowIndex = index;
            
            // í¼ì— ë°ì´í„° ì±„ìš°ê¸°
            document.getElementById('customerName').value = customer.name;
            document.getElementById('phoneNumber').value = customer.phone;
            document.getElementById('carBrand').value = customer.carBrand;
            document.getElementById('carModel').value = customer.carModel;
            document.getElementById('carYear').value = customer.carYear;
            document.getElementById('serviceType').value = customer.serviceType;
            document.getElementById('serviceDate').value = customer.serviceDate;
            document.getElementById('serviceStatus').value = customer.status;
            document.getElementById('notes').value = customer.notes;
            
            // ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
            document.getElementById('submitBtn').textContent = 'ìˆ˜ì • ì™„ë£Œ';
            document.getElementById('cancelBtn').style.display = 'inline-block';
            
            // í¼ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            document.querySelector('.form-section').scrollIntoView({ behavior: 'smooth' });
        }

        // í¸ì§‘ ì·¨ì†Œ
        function cancelEdit() {
            editingRowIndex = -1;
            document.getElementById('customerForm').reset();
            document.getElementById('serviceDate').value = new Date().toISOString().split('T')[0];
            document.getElementById('submitBtn').textContent = 'ê³ ê° ë“±ë¡';
            document.getElementById('cancelBtn').style.display = 'none';
        }

        // ê³ ê° ì‚­ì œ
        async function deleteCustomer(index) {
            if (!confirm('ì •ë§ë¡œ ì´ ê³ ê° ì •ë³´ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                const customer = customers[index];
                
                // í–‰ ì‚­ì œ ìš”ì²­
                await gapi.client.sheets.spreadsheets.batchUpdate({
                    spreadsheetId: SPREADSHEET_ID,
                    resource: {
                        requests: [{
                            deleteDimension: {
                                range: {
                                    sheetId: 0, // ì²« ë²ˆì§¸ ì‹œíŠ¸
                                    dimension: 'ROWS',
                                    startIndex: customer.rowIndex - 1,
                                    endIndex: customer.rowIndex
                                }
                            }
                        }]
                    }
                });
                
                showMessage('ê³ ê° ì •ë³´ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
                loadCustomers();
            } catch (error) {
                console.error('ì‚­ì œ ì‹¤íŒ¨:', error);
                showMessage('ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        // ê³ ê° ê²€ìƒ‰
        function searchCustomers() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            if (!searchTerm) {
                displayCustomers(customers);
                return;
            }
            
            const filteredCustomers = customers.filter(customer => 
                customer.name.toLowerCase().includes(searchTerm) ||
                customer.phone.includes(searchTerm) ||
                customer.carBrand.toLowerCase().includes(searchTerm) ||
                customer.carModel.toLowerCase().includes(searchTerm) ||
                customer.serviceType.toLowerCase().includes(searchTerm)
            );
            
            displayCustomers(filteredCustomers);
        }

        // ë¡œë”© í‘œì‹œ
        function showLoading() {
            document.getElementById('customersTable').innerHTML = '<div class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';
        }

        // ë©”ì‹œì§€ í‘œì‹œ
        function showMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = type;
            messageDiv.textContent = message;
            
            const container = document.querySelector('.main-content');
            container.insertBefore(messageDiv, container.firstChild);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 5000);
        }

        // Google Identity Services ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ
        const gisScript = document.createElement('script');
        gisScript.src = 'https://accounts.google.com/gsi/client';
        gisScript.async = true;
        gisScript.defer = true;
        document.head.appendChild(gisScript);
    </script>
</body>
</html>
